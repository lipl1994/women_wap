<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>修改资料</title>
    <link rel="stylesheet" href="./css/common.css">
    <link rel="stylesheet" href="./css/style.css">
    <script src="./js/jquery-3.3.1.min.js"></script>
    <script src="./js/common.js"></script>
</head>

<body>
    <header class="my-header">
        <div class="logo back">
            <span id="goBack">
                <img src="./images/Shape.png" alt="">
            </span>
        </div>
        <div class="my-title">
            <h2>修改资料</h2>
        </div>
        <div class="menu-btn">
            <span class="menu-button"></span>
        </div>
    </header>

    <section class="modify-main">
        <div class="modify">
            <span>头像</span>
            <span class="rl"></span>
        </div>
        <div class="modify">
            <span>用户名</span>
            <input id="names" type="text" value="TOP" class="modify-val">
        </div>
        <div class="modify">
            <span>邮箱</span>
            <input id="email" type="text" value="320264628@qq.com" class="modify-val">
        </div>
        <div class="modify">
            <span>电话</span>
            <span class="modify-phone">16888666868</span>
            <span class="rl"></span>
        </div>
        <div class="modify">
            <a href="./modifyPwd.html">
                <span>修改密码</span>
            </a>
            <span class="rl"></span>
        </div>
    </section>
</body>
<script>
    var loginDomain='http://fulian.womenvoice.cn';
    var name=document.querySelector('#name');
    var email=document.querySelector('#email');
    var user_id=getCookie('userId');
    names.value=getCookie('userName');
    email.value=getCookie('userEmail');
    // 修改基本信息
    names.focus();
    goBack.addEventListener('click', basicData);

    function basicData() {
        console.log(names.value,user_id,email.value);
        $.ajax({
            url: loginDomain + "/api/v2/update/user",
            type: 'POST',
            xhrFields: {
                withCredentials: true
            },
            
            data:{
                name:names.value,
                user_id:user_id,
                email:email.value
            }
        }).then(function (res) {
            alert('修改成功');
            window.location.href='./personalCenter.html';
        }).catch(function (err) {
            console.log(err);
        })
    }
</script>

</html>